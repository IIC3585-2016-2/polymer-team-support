<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

</head><body><dom-module id="sprite-animator-app">
  <template>
    <style>
      :host {
        display: block;
      }
      * {
        font-family: Arial, Helvetica, sans-serif;
      }
      ul {
          background: #3399ff;
          padding: 20px;
      }
      ul li {
          background: #cce5ff;
          margin: 5px;
      }
    </style>
    <div id="div1">
      <h2>Hello [[prop1]]</h2>
      <input type="file" id="files" class="files" name="files[]" on-change="readfiles" multiple="">
      <output id="list"></output>
    </div>
    <div id="animation">
      <img id="sprite" width="200" height="200">
    </div>

  </template>

  <script>Polymer({is:"sprite-animator-app",properties:{prop1:{type:String,value:"Everyone!"}},readfiles:function(e,r){this.fire("reading",{})}});</script>
</dom-module>

<script>function readfiles(e){console.log(e);var t=e.target.$.files.files,a=e.target.$.files.files.length;console.log(files);var n=[];if(t){for(var r=0;r<a;r++){var i=t[r];n.push("<li><strong>",escape(i.name),"</strong> (",i.type||"n/a",") - ",i.size," bytes, last modified: ",i.lastModifiedDate?i.lastModifiedDate.toLocaleDateString():"n/a","</li>")}document.getElementById("list").innerHTML="<ul>"+n.join("")+"</ul>",animate(t,200,a)}else alert("failure")}function animate(e,t,a){var n=0;document.getElementById("sprite");setInterval(function(){var t=e[n];n=(n+1)%a,renderImage(t)},200)}function renderImage(e){var t=new FileReader;t.onload=function(e){the_url=e.target.result;var t=document.getElementById("sprite");t.src=the_url},t.readAsDataURL(e)}document.querySelector("sprite-animator-app").addEventListener("reading",function(e){readfiles(e)});</script>
</body></html>