<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="github-organization-info">
  <template>
    <style>
      :host {
        display: block;
      }

    </style>
    <table border="1">
        <tr><th id="name"></th></th>
        <tr><th><a id="url">organization url</a></th></tr>
        <tr><th><img id="img"></img></th></tr>
        <tr ><th id="desc"></th></tr>
        <tr ><th id="loc"></th></tr>
        <tr ><th id="repocount"></th></tr>
    </table>
  </template>

  <script>
    Polymer({

      is: 'github-organization-info',

      properties: {
        organization: {
          type: String,
          value: '',
        },
      },
      ready: function (){
        this.req();
      },
      req: function()      {
        var xmlHttp = new XMLHttpRequest();
        self = this;
        xmlHttp.onreadystatechange = function() {
            if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
                self.handleResponse(xmlHttp.responseText);
        };
        var fullURL = 'https://api.github.com/orgs/' + this.organization;
        xmlHttp.open("GET", fullURL, true);
        xmlHttp.send();
      },

      handleResponse: function(responseText)          {
          var parsedResponse = JSON.parse(responseText);
          this.$.name.textContent = parsedResponse.name;
          this.$.url.href = parsedResponse.url;
          this.$.img.src = parsedResponse.avatar_url;
          this.$.desc.textContent = parsedResponse.description;
          this.$.loc.textContent = parsedResponse.location;
          this.$.repocount.textContent = parsedResponse.public_repos;
      },


    });
  </script>
</dom-module>
